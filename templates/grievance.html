<!DOCTYPE html>
<html lang="{{ session.get('selected_language', 'en') }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nyay - Describe Grievance</title>
  <link rel="stylesheet" href="/static/css/grievance.css" />
  <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
</head>

<body data-lang="{{ session.get('selected_language', 'en') }}">
  <!-- Particle Background -->
  <div id="particles-js"></div>

<!-- Navbar -->
<nav class="navbar">
  <div class="nav-container">
    <div class="navbar-title">Nyay</div>

    <!-- Hamburger Toggle -->
    <div class="menu-toggle" id="mobile-menu">
      <span></span><span></span><span></span>
    </div>

    <!-- Navigation Links -->
    <ul class="nav-links" id="navLinks">
      <li><a href="/">Home</a></li>
      <li><a href="/grievance">File Grievance</a></li>
    </ul>
  </div>
</nav>


  <!-- Main Content -->
  <div class="container">
    <div class="grievance-box">
      <h2 id="form-title">Describe Your Grievance</h2>

      <form id="grievance-form" method="POST" action="/grievance">
        <!-- üéôÔ∏è Voice Recording with Loader -->
        <div class="voice-row">
          <!-- Loader Left -->
          <div id="translationLoader" class="loader-container">
            <dotlottie-player
              src="https://lottie.host/80d7623e-a354-43af-88ee-cffac28c3789/IONNMS6xeg.lottie"
              background="transparent"
              speed="1"
              style="width: 60px; height: 60px;"
              loop
              autoplay
            ></dotlottie-player>
          </div>

          <!-- Button + Status -->
          <div class="voice-controls">
            <button type="button" id="recordBtn">üéôÔ∏è</button>
            <span id="recordStatus">Click to start recording</span>
          </div>
        </div>

        <!-- üìù Grievance Text -->
        <textarea
          id="problem"
          name="problem"
          placeholder="e.g. Land dispute, domestic violence, labor issue..."
          required
        ></textarea>

        <!-- üîΩ Hidden language input -->
        <input type="hidden" name="language" value="{{ session.get('selected_language', 'en') }}">

        <!-- ‚úÖ Submit -->
        <button type="submit" class="submit-btn" id="continueBtn">Continue</button>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Nyay. All Rights Reserved.</p>
  </footer>

  <!-- Scroll to Top -->
  <button id="scrollToTopBtn" title="Go to top">‚Üë</button>

  <!-- Scripts -->
  <script src="/static/js/grievance.js" defer></script>
  <script src="/static/js/particles.min.js"></script>
  <script>
    window.onload = function () {
      particlesJS("particles-js", {
        particles: {
          number: { value: 360, density: { enable: true, value_area: 800 } },
          color: { value: "#a855f7" },
          shape: { type: "circle" },
          opacity: {
            value: 0.6,
            random: true,
            anim: { enable: true, speed: 1, opacity_min: 0.1 }
          },
          size: {
            value: 3,
            random: true,
            anim: { enable: true, speed: 4, size_min: 0.3 }
          },
          line_linked: {
            enable: true,
            distance: 130,
            color: "#a855f7",
            opacity: 0.4,
            width: 1
          },
          move: {
            enable: true,
            speed: 3.5,
            direction: "none",
            out_mode: "bounce",
            bounce: true
          }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" }
          },
          modes: {
            repulse: { distance: 150, duration: 0.6 },
            push: { particles_nb: 4 }
          }
        },
        retina_detect: true
      });
    };
  </script>
</body>
</html>
