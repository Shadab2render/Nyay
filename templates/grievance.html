<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nyay - Describe Grievance</title>
  <link rel="stylesheet" href="/static/css/grievance.css" />
</head>
<body data-lang="{{ session.get('selected_language', 'en') }}">
  <!-- Particle Background -->
  <div id="particles-js"></div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="navbar-title">Nyay</div>
      <div class="menu-toggle" id="mobile-menu">
        <span></span><span></span><span></span>
      </div>
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
      </ul>
    </div>
  </nav>

  <!-- Centered Glass Form -->
  <div class="container">
    <div class="grievance-box">
      <h2 id="form-title">Describe Your Grievance</h2>
      <form id="grievance-form" method="POST" action="/grievance">
        <!-- Voice Recording -->
        <div class="voice-input">
          <button type="button" id="recordBtn">üéôÔ∏è</button>
          <span id="recordStatus">Click to start recording</span>
        </div>

        <!-- Textarea -->
        <textarea
          id="problem"
          name="problem"
          placeholder="e.g. Land dispute, domestic violence, labor issue..."
          required
        ></textarea>

        <!-- Submit -->
        <button type="submit" class="submit-btn" id="continueBtn">Continue</button>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Nyay. All Rights Reserved.</p>
  </footer>

  <!-- Scroll to Top -->
  <button id="scrollToTopBtn" title="Go to top">‚Üë</button>

  <!-- Language Translation (injected from session) -->
  <script>
    const userLang = "{{ session.get('selected_language', 'en') }}";
    const labels = {
      en: { speak: "Speak", continue: "Continue", title: "Describe Your Grievance" },
      hi: { speak: "‡§¨‡•ã‡§≤‡§®‡§æ", continue: "‡§Ü‡§ó‡•á ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç", title: "‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç" },
      or: { speak: "‡¨ï‡¨π‡¨®‡≠ç‡¨§‡≠Å", continue: "‡¨Ü‡¨ó‡¨ï‡≠Å ‡¨¨‡¨¢‡¨®‡≠ç‡¨§‡≠Å", title: "‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨∏‡¨Æ‡¨∏‡≠ç‡≠ü‡¨æ ‡¨¨‡¨∞‡≠ç‡¨£‡≠ç‡¨£‡¨®‡¨æ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å" },
      bn: { speak: "‡¶¨‡¶≤‡ßÅ‡¶®", continue: "‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶®", title: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®" },
      ta: { speak: "‡Æ™‡Øá‡Æö‡Æµ‡ØÅ‡ÆÆ‡Øç", continue: "‡Æ§‡Øä‡Æü‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç", title: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æ©‡Øà ‡Æö‡Øä‡Æ≤‡Øç‡Æ≤‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç" },
      te: { speak: "‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞Ç‡∞°‡∞ø", continue: "‡∞ï‡±ä‡∞®‡∞∏‡∞æ‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø", title: "‡∞Æ‡±Ä ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞®‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø" },
    };

    document.addEventListener("DOMContentLoaded", () => {
      const lang = labels[userLang] || labels["en"];
      document.getElementById("recordBtn").textContent = lang.speak;
      document.getElementById("continueBtn").textContent = lang.continue;
      document.getElementById("form-title").textContent = lang.title;
    });
  </script>

  <!-- Scripts -->
  <script src="/static/js/grievance.js" defer></script>
  <script src="/static/js/particles.min.js"></script>
  <script>
    window.onload = function () {
      particlesJS("particles-js", {
        particles: {
          number: { value: 360, density: { enable: true, value_area: 800 } },
          color: { value: "#a855f7" },
          shape: { type: "circle" },
          opacity: {
            value: 0.6,
            random: true,
            anim: { enable: true, speed: 1, opacity_min: 0.1 }
          },
          size: {
            value: 3,
            random: true,
            anim: { enable: true, speed: 4, size_min: 0.3 }
          },
          line_linked: {
            enable: true,
            distance: 130,
            color: "#a855f7",
            opacity: 0.4,
            width: 1
          },
          move: {
            enable: true,
            speed: 3.5,
            direction: "none",
            out_mode: "bounce",
            bounce: true
          }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" }
          },
          modes: {
            repulse: { distance: 150, duration: 0.6 },
            push: { particles_nb: 4 }
          }
        },
        retina_detect: true
      });
    };
  </script>
</body>
</html>
